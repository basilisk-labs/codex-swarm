{
  "schema_version": "recipe-manifest@1",
  "slug": "feature-spec-to-tasks",
  "name": "Task to roadmap",
  "summary": "Turns a top-level task or issue into a detailed roadmap and task draft",
  "tags": [
    "product",
    "planning",
    "roadmap",
    "tasks",
    "codex-swarm"
  ],
  "version": "0.2.0",
  "entrypoints": {
    "ide": {
      "action_id": "codexSwarm.recipe.run",
      "ui": {
        "form": "scenarios/from-text.inputs.json"
      }
    },
    "cli": {
      "command": "node .codex-swarm/recipes/feature-spec-to-tasks/tools/run-feature.js",
      "args_contract": "json-file"
    }
  },
  "scenarios": [
    {
      "id": "from-text",
      "path": "scenarios/from-text.md",
      "title": "From task text",
      "inputs_schema": "scenarios/from-text.inputs.json",
      "outputs": [
        {
          "id": "roadmap",
          "path_template": "docs/roadmaps/<roadmap_slug>.roadmap.md"
        },
        {
          "id": "plan",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.plan.json"
        },
        {
          "id": "tasks_draft",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.tasks.draft.md"
        }
      ],
      "required_agents": [
        "ORCHESTRATOR",
        "PLANNER",
        "CODER",
        "REVIEWER"
      ]
    },
    {
      "id": "from-issue",
      "path": "scenarios/from-issue.md",
      "title": "From issue text",
      "inputs_schema": "scenarios/from-issue.inputs.json",
      "outputs": [
        {
          "id": "roadmap",
          "path_template": "docs/roadmaps/<roadmap_slug>.roadmap.md"
        },
        {
          "id": "plan",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.plan.json"
        },
        {
          "id": "tasks_draft",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.tasks.draft.md"
        }
      ],
      "required_agents": [
        "ORCHESTRATOR",
        "PLANNER",
        "CODER",
        "REVIEWER"
      ]
    },
    {
      "id": "refactor-existing",
      "path": "scenarios/refactor-existing.md",
      "title": "Refactor existing",
      "inputs_schema": "scenarios/refactor-existing.inputs.json",
      "outputs": [
        {
          "id": "roadmap",
          "path_template": "docs/roadmaps/<roadmap_slug>.roadmap.md"
        },
        {
          "id": "plan",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.plan.json"
        },
        {
          "id": "tasks_draft",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.tasks.draft.md"
        },
        {
          "id": "migration",
          "path_template": ".codex-swarm/.runs/<run_id>/artifacts/<roadmap_slug>.migration.md"
        }
      ],
      "required_agents": [
        "ORCHESTRATOR",
        "PLANNER",
        "CODER",
        "REVIEWER"
      ]
    }
  ],
  "tools": [
    {
      "id": "runner",
      "type": "node",
      "command": "node tools/run-feature.js",
      "cwd": ".codex-swarm/recipes/feature-spec-to-tasks",
      "reads": [
        ".codex-swarm/.runs/"
      ],
      "writes": [
        "docs/roadmaps/",
        ".codex-swarm/.runs/"
      ],
      "network": "deny",
      "env": [
        "RECIPE_INPUTS_PATH",
        "RECIPE_SCENARIO_ID",
        "RECIPE_RUN_ID"
      ]
    }
  ],
  "env": [],
  "context": {
    "include": [
      "README.md",
      "docs/**/*.md",
      ".codex-swarm/config.*",
      "AGENTS.md",
      ".codex-swarm/agents/*.json"
    ],
    "exclude": [
      ".codex-swarm/tasks/**",
      ".env",
      "**/*secret*",
      "**/*key*"
    ]
  },
  "requires": {
    "services": [],
    "features": [
      "agentctl",
      "orchestrator"
    ]
  },
  "safety": {
    "no_invented_inputs": true,
    "no_network_by_default": true,
    "writes_must_match_manifest": true
  }
}
