{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Spec to Tasks - from spec text",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "spec_slug": {
      "type": "string",
      "minLength": 1,
      "pattern": "^[a-z0-9][a-z0-9-]{1,63}$",
      "description": "Short slug for output files and paths."
    },
    "spec_title": {
      "type": "string",
      "minLength": 3,
      "maxLength": 140,
      "description": "Human-readable spec title."
    },
    "spec_text": {
      "type": "string",
      "minLength": 20,
      "description": "Specification text (markdown/plain)."
    },
    "constraints": {
      "type": "string",
      "default": "",
      "description": "Constraints (stack, timelines, compatibility)."
    },
    "acceptance_criteria": {
      "type": "string",
      "default": "",
      "description": "Acceptance criteria (bullet list)."
    },
    "repo_paths_allowlist": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "default": [
        "docs/**",
        "src/**",
        ".codex-swarm/**",
        ".github/**"
      ],
      "description": "Paths allowed for reading/writing (recipe policy)."
    },
    "task_batch_size": {
      "type": "integer",
      "minimum": 1,
      "maximum": 30,
      "default": 8,
      "description": "Maximum number of tasks in the first batch."
    },
    "task_granularity": {
      "type": "string",
      "enum": [
        "coarse",
        "normal",
        "fine"
      ],
      "default": "normal",
      "description": "Task detail level."
    },
    "runs_dir": {
      "type": "string",
      "default": ".codex-swarm/.runs",
      "description": "Directory for run artifacts."
    }
  },
  "required": [
    "spec_slug",
    "spec_title",
    "spec_text"
  ]
}
